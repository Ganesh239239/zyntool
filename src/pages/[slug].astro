---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';

// Imports for your tools
import CompressTool from '../components/tools/CompressTool.astro';
// ... other imports

export async function getStaticPaths() {
  const toolEntries = await getCollection('tools');
  return toolEntries.map(entry => ({ params: { slug: entry.slug || entry.id }, props: { entry } }));
}

const { entry } = Astro.props;
const toolId = entry.slug || entry.id;
const { Content } = await entry.render();

const seoTitle = `${entry.data.title} Online - Free | ZynTool`;
---

<MainLayout title={seoTitle}>
    <!-- SLIM TOOLBAR (The Breadcrumb we created earlier) -->
    <div class="app-breadcrumb-bar bg-white border-bottom">
        <div class="container d-flex align-items-center h-100">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="/" class="text-decoration-none text-muted small fw-bold">Home</a></li>
                    <li class="breadcrumb-item active small fw-bold text-dark">{entry.data.title}</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- SIMPLE TOOL AREA: No cards, no hero, just content -->
    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-dark mb-2">{entry.data.title}</h1>
            <p class="fs-5 text-secondary mx-auto" style="max-width: 700px;">{entry.data.description}</p>
        </div>

        <!-- THE TOOL COMPONENT -->
        <div class="tool-main-content">
            {toolId === 'compress-image' && <CompressTool entry={entry} />}
            <!-- Add other tool switches here -->
        </div>

        <!-- SEO CONTENT: Sits cleanly below -->
        <div class="mt-5 pt-5 border-top">
            <article class="prose mx-auto">
                <Content />
            </article>
        </div>
    </div>
</MainLayout>

<style>
    .app-breadcrumb-bar { height: 50px; position: sticky; top: 70px; z-index: 100; }
    .breadcrumb-item + .breadcrumb-item::before { content: "â€º"; font-size: 1.2rem; vertical-align: middle; }
    .prose { max-width: 800px; color: #666; line-height: 1.7; }
</style>
