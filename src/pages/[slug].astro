---
import { getCollection } from 'astro:content';
import MainLayout from '../../../layouts/MainLayout.astro';
// Import all your tool components here
import CompressTool from '../../../components/tools/CompressTool.jsx';
import ResizeTool from '../../../components/tools/ResizeTool.jsx'; // You need to create this
import CropTool from '../../../components/tools/CropTool.jsx';     // You need to create this
import ConverterTool from '../../../components/tools/ConverterTool.jsx'; // You need to create this

export async function getStaticPaths() {
  const toolEntries = await getCollection('tools');
  return toolEntries.map(entry => ({ params: { slug: entry.slug }, props: { entry } }));
}

const { entry } = Astro.props;
const toolId = entry.slug;
---

<MainLayout title={entry.data.title} description={entry.data.description}>
    <div class="app-page-wrapper">
        <div class="container-pro">
            <header class="tool-title-header">
                <h1>{entry.data.title}</h1>
                <p>{entry.data.description}</p>
            </header>

            <div class="tool-content-area">
                {/* CONDITIONAL RENDERING SWITCH */}
                {toolId === 'compress-image' && <CompressTool client:load color={entry.data.color} />}
                {toolId === 'resize-image'   && <ResizeTool client:load color={entry.data.color} />}
                {toolId === 'crop-image'     && <CropTool client:load color={entry.data.color} />}
                {toolId === 'convert-to-jpg' && <ConverterTool client:load color={entry.data.color} />}
            </div>
        </div>
    </div>
</MainLayout>
